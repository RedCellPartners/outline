!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t((e=e||self).ReactVirtual={},e.React)}(this,(function(e,t){"use strict";function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;var n,u=["bottom","height","left","right","top","width"],a=new Map,c=function e(){var t=[];a.forEach((function(e,r){var n,a,c=r.getBoundingClientRect();n=c,a=e.rect,void 0===n&&(n={}),void 0===a&&(a={}),u.some((function(e){return n[e]!==a[e]}))&&(e.rect=c,t.push(e))})),t.forEach((function(e){e.callbacks.forEach((function(t){return t(e.rect)}))})),n=window.requestAnimationFrame(e)};var o="undefined"!=typeof window?t.useLayoutEffect:t.useEffect;function i(e){var r=t.useState(e.current),u=r[0],i=r[1],f=t.useReducer(s,null),l=f[0],v=f[1],d=t.useRef(!1);return o((function(){e.current!==u&&i(e.current)})),o((function(){if(u&&!d.current){d.current=!0;var e=u.getBoundingClientRect();v({rect:e})}}),[u]),t.useEffect((function(){if(u){var e,t,r=(e=u,t=function(e){v({rect:e})},{observe:function(){var r=0===a.size;a.has(e)?a.get(e).callbacks.push(t):a.set(e,{rect:void 0,hasRectChanged:!1,callbacks:[t]}),r&&c()},unobserve:function(){var r=a.get(e);if(r){var u=r.callbacks.indexOf(t);u>=0&&r.callbacks.splice(u,1),r.callbacks.length||a.delete(e),a.size||cancelAnimationFrame(n)}}});return r.observe(),function(){r.unobserve()}}}),[u]),l}function s(e,t){var r=t.rect;return e&&e.height===r.height&&e.width===r.width?e:r}var f=function(){return 50},l=function(e){return e},v=function(e,t){return e[t?"offsetWidth":"offsetHeight"]},d=function(e){for(var t=Math.max(e.start-e.overscan,0),r=Math.min(e.end+e.overscan,e.size-1),n=[],u=t;u<=r;u++)n.push(u);return n};function h(e,t){for(var r=e.measurements,n=e.outerSize,u=e.scrollOffset,a=r.length-1,c=function(e,t,r,n){for(;e<=t;){var u=(e+t)/2|0,a=r(u);if(a<n)e=u+1;else{if(!(a>n))return u;t=u-1}}return e>0?e-1:0}(0,a,(function(e){return r[e].start}),u),o=c;o<a&&r[o].end<u+n;)o++;return t.start!==c||t.end!==o?{start:c,end:o}:t}e.defaultRangeExtractor=d,e.useVirtual=function(e){var n,u,a=e.size,c=void 0===a?0:a,s=e.estimateSize,m=void 0===s?f:s,p=e.overscan,g=void 0===p?1:p,b=e.paddingStart,y=void 0===b?0:b,O=e.paddingEnd,z=void 0===O?0:O,k=e.parentRef,R=e.horizontal,E=e.scrollToFn,S=e.useObserver,w=e.onScrollElement,x=e.scrollOffsetFn,C=e.keyExtractor,M=void 0===C?l:C,j=e.measureSize,T=void 0===j?v:j,F=e.rangeExtractor,A=void 0===F?d:F,L=R?"width":"height",q=R?"scrollLeft":"scrollTop",P=t.useRef({scrollOffset:0,measurements:[]}),B=((S||i)(k)||((n={})[L]=0,n))[L];P.current.outerSize=B;var I=t.useCallback((function(e){k.current&&(k.current[q]=e)}),[k,q]),V=E||I;E=t.useCallback((function(e){V(e,I)}),[I,V]);var _=t.useState({}),H=_[0],W=_[1],D=t.useCallback((function(){return W({})}),[]),G=t.useRef([]),J=t.useMemo((function(){var e=G.current.length>0?Math.min.apply(Math,G.current):0;G.current=[];for(var t=P.current.measurements.slice(0,e),r=e;r<c;r++){var n=M(r),u=H[n],a=t[r-1]?t[r-1].end:y,o="number"==typeof u?u:m(r),i=a+o;t[r]={index:r,start:a,size:o,end:i,key:n}}return t}),[m,H,y,c,M]),K=((null==(u=J[c-1])?void 0:u.end)||0)+z;P.current.measurements=J,P.current.totalSize=K;var N=t.useState({start:0,end:0}),Q=N[0],U=N[1],X=w?w.current:k.current,Y=t.useRef(x);Y.current=x;var Z=t.useRef(null),$=t.useCallback((function(){null!==Z.current&&(clearTimeout(Z.current),Z.current=null)}),[]);o((function(){return Z.current=setTimeout((function(){U((function(e){return h(P.current,e)}))})),function(){return $()}}),[J,B,$]),o((function(){if(!X)return U({start:0,end:0}),void(P.current.scrollOffset=0);var e=function(e){var t=Y.current?Y.current(e):X[q];P.current.scrollOffset=t,$(),U((function(e){return h(P.current,e)}))};return e(),X.addEventListener("scroll",e,{capture:!1,passive:!0}),function(){X.removeEventListener("scroll",e)}}),[X,q,$]);var ee=t.useRef(T);ee.current=T;var te=t.useMemo((function(){for(var e=A({start:Q.start,end:Q.end,overscan:g,size:J.length}),t=[],n=function(n,u){var a=e[n],c=r(r({},J[a]),{},{measureRef:function(e){if(e){var t=ee.current(e,R);if(t!==c.size){var n=P.current.scrollOffset;c.start<n&&I(n+(t-c.size)),G.current.push(a),W((function(e){var n;return r(r({},e),{},((n={})[c.key]=t,n))}))}}}});t.push(c)},u=0,a=e.length;u<a;u++)n(u);return t}),[I,R,J,g,Q.end,Q.start,A]),re=t.useRef();o((function(){re.current&&m&&W({}),re.current=!0}),[m]);var ne=t.useCallback((function(e,t){var r=(void 0===t?{}:t).align,n=void 0===r?"start":r,u=P.current,a=u.scrollOffset,c=u.outerSize;"auto"===n&&(n=e<=a?"start":e>=a+c?"end":"start"),"start"===n?E(e):"end"===n?E(e-c):"center"===n&&E(e-c/2)}),[E]),ue=t.useCallback((function(e,t){var n=void 0===t?{}:t,u=n.align,a=void 0===u?"auto":u,o=function(e,t){if(null==e)return{};var r,n,u={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(u[r]=e[r]);return u}(n,["align"]),i=P.current,s=i.measurements,f=i.scrollOffset,l=i.outerSize,v=s[Math.max(0,Math.min(e,c-1))];if(v){if("auto"===a)if(v.end>=f+l)a="end";else{if(!(v.start<=f))return;a="start"}var d="center"===a?v.start+v.size/2:"end"===a?v.end:v.start;ne(d,r({align:a},o))}}),[ne,c]),ae=t.useCallback((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];ue.apply(void 0,t),requestAnimationFrame((function(){ue.apply(void 0,t)}))}),[ue]);return{virtualItems:te,totalSize:K,scrollToOffset:ne,scrollToIndex:ae,measure:D}},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=react-virtual.production.min.js.map
